<% content_for :title, @department.name %>

<div class="page-header">
  <h1><%= @department.name %></h1>
</div>

<div class="detail-section">
  <p>
    <strong>Name:</strong>
    <%= @department.name %>
  </p>

  <p>
    <strong>Employees Count:</strong>
    <%= @department.employees.count %>
  </p>

  <p>
    <strong>Created At:</strong>
    <%= @department.created_at.strftime("%b %d, %Y at %I:%M %p") %>
  </p>
</div>

<% if @department.employees.any? %>
  <div class="detail-section">
    <h2>Employees in this Department</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Designation</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @department.employees.each do |employee| %>
          <tr>
            <td><%= employee.full_name %></td>
            <td><%= employee.email %></td>
            <td><%= employee.designation %></td>
            <td>
              <%= link_to "View", employee_path(employee), class: "action-link" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% end %>

<div class="action-buttons">
  <%= link_to "Edit this department", edit_department_path(@department), class: "btn btn-primary" %>
  <%= link_to "Back to departments", departments_path, class: "btn btn-secondary" %>
  <%= button_to "Delete this department", department_path(@department), method: :delete, data: { turbo_confirm: "Are you sure? This will fail if the department has employees." }, class: "btn btn-danger" %>
</div>

